{% load static %}
{% load goods_tags %}
{% load carts_tags %}
{% load wishlist_tags %}

{% load cache %}

{% user_carts request as carts %}
{% user_wishlist request as wishlist %}

 <!DOCTYPE html>
 <html lang="ru">
 
 <head>
     <meta charset="UTF-8">
     <meta http-equiv="x-ua-compatible" content="ie=edge" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
     
     <title>{{ title }}</title>
     <meta name="keywords" content="apparel, catalog, clean, ecommerce, ecommerce HTML, electronics, fashion, html eCommerce, html store, minimal, multipurpose, multipurpose ecommerce, online store, responsive ecommerce template, shops" />
     <meta name="description" content="Учебный проект.">
     <meta name="author" content="Бритвина Анастасия">
 
     <!-- site Favicon -->
     <link rel="icon" href="{% static "assets/images/favicon/favicon.png" %}" sizes="32x32" >
     <link rel="apple-touch-icon" href="{% static "assets/images/favicon/favicon.png" %}" />
     <meta name="msapplication-TileImage" content= "{% static "assets/images/favicon/favicon.png" %}" />
 
     <!-- css Icon Font -->
     <link rel="stylesheet" href="{% static "assets/css/vendor/ecicons.min.css" %}" />

     <!-- css Images -->
     <link rel="stylesheet" href="{% static "assets/css/images/images.css" %}" />
 
     <!-- css All Plugins Files -->
     <link rel="stylesheet" href="{% static "assets/css/plugins/animate.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/swiper-bundle.min.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/jquery-ui.min.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/countdownTimer.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/slick.min.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/nouislider.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/plugins/bootstrap.css" %}" />
 
     <!-- Main Style -->
     <link rel="stylesheet" href="{% static "assets/css/demo1.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/style.css" %}" />
     <link rel="stylesheet" href="{% static "assets/css/responsive.css" %}" />
 
     <!-- Background css -->
     <link rel="stylesheet" id="bg-switcher-css" href="{% static "assets/css/backgrounds/bg-4.css" %}">

     <!-- Custom css -->
     <link rel="stylesheet" id="bg-switcher-css" href="{% static "assets/css/custom/custom.css" %}">
     
 </head>
 <body {% if body_class %} class="{{ body_class }}"{% endif %}>
     <div id="ec-overlay"><span class="loader_img"></span></div>
 
     <!-- Header start  -->
     <header class="ec-header">
        <!--Ec Header Top Start -->
         <div class="header-top">
             <div class="container">
                 <div class="row align-items-center">
                     <!-- Header Top Message Start -->
                     <div class="col text-center header-top-center">
                         <div class="header-top-message text-upper">
                             Учебный проект
                         </div>
                     </div>
                     <!-- Header Top Message End -->
                      <!-- Header Top responsive Action -->
                    <div class="col d-lg-none ">
                        <div class="ec-header-bottons">
                            <!-- Header User Start -->
                            <div class="ec-header-user dropdown">
                                <button class="dropdown-toggle" data-bs-toggle="dropdown"><img
                                    src="{% static "assets/images/icons/user.svg" %}" class="svg_img header_svg" alt="" />
                                </button>
                                <ul class="dropdown-menu dropdown-menu-right">
                                    {% if not user.is_authenticated or user.is_superuser %}
                                        <li><a class="dropdown-item" href="{% url "users:registration" %}">Регистрация</a></li>
                                        <li><a class="dropdown-item" href="{% url "users:login" %}">Вход</a></li>
                                    {% else %}
                                        <li><a class="dropdown-item" href="{% url "users:profile" %}">Профиль</a></li>
                                        <form action="{% url 'users:logout' %}" method="post">
                                            {% csrf_token %}
                                            <input type="hidden" name="next" value="{{ request.path }}">
                                            <li><button type="submit" class="dropdown-item">Выход</button></li>
                                        </form>
                                    {% endif %}
                                </ul>
                            </div>
                            <!-- Header User End -->
                            {% if user.is_authenticated %}
                            <!-- Header Wishlist Start -->
                            <a href="{% url "users:wishlist" %}" class="ec-header-btn ec-header-wishlist">
                                <div class="header-icon"><img src="{% static "assets/images/icons/wishlist.svg" %}"
                                        class="svg_img header_svg" alt="" /></div>
                                <span class="ec-header-count">{{ wishlist }}</span>
                            </a>
                            <!-- Header Wishlist End -->
                            {% endif %}
                            <!-- Header Cart Start -->
                            <a href="#ec-side-cart" class="ec-header-btn ec-side-toggle">
                                <div class="header-icon"><img src="{% static "assets/images/icons/cart.svg" %}"
                                        class="svg_img header_svg" alt="" /></div>
                                <span class="ec-header-count cart-count-lable">{% if carts %}{{ carts.total_quantity }}{% else %}0{% endif %}</span>
                            </a>
                            <!-- Header Cart End -->
                            <!-- Header menu Start -->
                            <a href="#ec-mobile-menu" class="ec-header-btn ec-side-toggle d-lg-none">
                                <img src="{% static "assets/images/icons/menu.svg" %}" class="svg_img header_svg" alt="icon" />
                            </a>
                            <!-- Header menu End -->
                        </div>
                    </div>
                    <!-- Header Top responsive Action -->
                 </div>
             </div>
         </div>
         <!-- Ec Header Top  End -->
         <!-- Ec Header Bottom  Start -->
         <div class="ec-header-bottom d-none d-lg-block">
             <div class="container position-relative">
                 <div class="row">
                     <div class="ec-flex">
                         <!-- Ec Header Logo Start -->
                         <div class="align-self-center">
                             <div class="header-logo">
                                 <a href="{% url "main:index" %}"><img src="{% static "assets/images/logo/logo.png" %}" alt="Site Logo" /><img
                                         {% comment %} class="dark-logo" src="{% static "assets/images/logo/dark-logo.png" %}" alt="Site Logo" {% endcomment %}
                                         style="display: none;" /></a>
                             </div>
                         </div>
                         <!-- Ec Header Logo End -->
 
                         <!-- Ec Header Search Start -->
                         <div class="align-self-center">
                             <div class="header-search">
                                 <form class="ec-btn-group-form" role="search" action="{% url 'goods:search' 'all' %}" method="get">
                                     <input class="form-control ec-search-bar" placeholder="Найти товар..." {% if request.GET.q %} value="{{ request.GET.q }}" {% endif %} type="search" name="q">
                                     <button class="submit" type="submit"><img src="{% static "assets/images/icons/search.svg" %}"
                                             class="svg_img header_svg" alt="" /></button>
                                 </form>
                             </div>
                         </div>
                         <!-- Ec Header Search End -->
 
                         <!-- Ec Header Button Start -->
                         <div class="align-self-center">
                             <div class="ec-header-bottons">
 
                                 <!-- Header User Start -->
                                 <div class="ec-header-user dropdown">
                                     <button class="dropdown-toggle" data-bs-toggle="dropdown"><img
                                             src="{% static "assets/images/icons/user.svg" %}" class="svg_img header_svg" alt="" /></button>
                                     <ul class="dropdown-menu dropdown-menu-right">

                                        {% if not user.is_authenticated or user.is_superuser %}
                                            <li><a class="dropdown-item" href="{% url "users:registration" %}">Регистрация</a></li>
                                            <li><a class="dropdown-item" href="{% url "users:login" %}">Вход</a></li>
                                        {% else %}
                                            <li><a class="dropdown-item" href="{% url "users:profile" %}">Профиль</a></li>
                                            <form action="{% url 'users:logout' %}" method="post">
                                                {% csrf_token %}
                                                <input type="hidden" name="next" value="{{ request.path }}">
                                                <li><button type="submit" class="dropdown-item">Выход</button></li>
                                            </form>
                                       {% endif %}
                                     </ul>
                                 </div>
                                 <!-- Header User End -->
                                 {% if user.is_authenticated %}
                                 <!-- Header wishlist Start -->
                                 <a href="{% url "users:wishlist" %}" class="ec-header-btn ec-header-wishlist">
                                     <div class="header-icon"><img src="{% static "assets/images/icons/wishlist.svg" %}"
                                             class="svg_img header_svg" alt="" /></div>
                                     <span class="ec-header-count wishlist-count-lable">{{ wishlist }}</span>
                                 </a>
                                 {% endif %}
                                 <!-- Header wishlist End -->
                                 <!-- Header Cart Start -->
                                 <a href="#ec-side-cart" class="ec-header-btn ec-side-toggle">
                                     <div class="header-icon"><img src="{% static "assets/images/icons/cart.svg" %}"
                                             class="svg_img header_svg" alt="" /></div>
                                     <span class="ec-header-count cart-count-lable">{% if carts %}{{ carts.total_quantity }}{% else %}0{% endif %}</span>
                                 </a>
                                 <!-- Header Cart End -->
                                 <!-- Header menu Start -->
                                 <a href="#ec-mobile-menu" class="ec-header-btn ec-side-toggle d-lg-none">
                                    <img src="{% static "assets/images/icons/menu.svg" %}" class="svg_img header_svg" alt="icon" />
                                 </a>
                                 <!-- Header menu End -->
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         <!-- Ec Header Button End -->
         <!-- Header responsive Bottom  Start -->
         <div class="ec-header-bottom d-lg-none">
             <div class="container position-relative">
                 <div class="row ">
 
                     <!-- Ec Header Logo Start -->
                     <div class="col">
                         <div class="header-logo">
                             <a href="{% url "main:index" %}"><img src="{% static "assets/images/logo/logo.png" %}" alt="Site Logo" /><img
                                     {% comment %} class="dark-logo" src="{% static "assets/images/logo/dark-logo.png" %}" alt="Site Logo" {% endcomment %}
                                     style="display: none;" /></a>
                         </div>
                     </div>
                     <!-- Ec Header Logo End -->
                     <!-- Ec Header Search Start -->
                     <div class="col">
                         <div class="header-search">
                             <form class="ec-btn-group-form" role="search" action="{% url 'goods:search' 'all' %}" method="get">
                                <input class="form-control ec-search-bar" placeholder="Найти товар..." {% if request.GET.q %} value="{{ request.GET.q }}" {% endif %} type="search" name="q">
                                <button class="submit" type="submit"><img src="{% static "assets/images/icons/search.svg" %}"
                                        class="svg_img header_svg" alt="" /></button>
                            </form>
                         </div>
                     </div>
                     <!-- Ec Header Search End -->
                 </div>
             </div>
         </div>
         <!-- Header responsive Bottom  End -->
         <!-- EC Main Menu Start -->
         <div id="ec-main-menu-desk" class="d-none d-lg-block sticky-nav">
             <div class="container position-relative">
                 <div class="row">
                     <div class="col-md-12 align-self-center">
                         <div class="ec-main-menu">
                             <ul>
                                 <li><a href="{% url "main:index" %}">Главная</a></li>
                                 <li><a href="{% url "main:about" %}">О магазине</a></li>
                                 <li><a href="{% url "main:project" %}">О проекте</a></li>

                                  <li class="dropdown"><a href="{% url "catalog:categories" %}">Каталог</a>

                                     <ul class="sub-menu">
                                        {% cache 60 catalog_categories %}
                                        {% tag_all_categories as all_categories %}
                                        {% if all_categories %}
                                            {% for cat in all_categories %}
                                                <li class="dropdown position-static"><a href="{% url "catalog:subcategories" cat.category.slug %}">
                                                    {{cat.category.name}}</a>
                                                </li>
                                            {% endfor %}
                                        {% else %}
                                            <li class="dropdown position-static">
                                                Категории не добавлены
                                            </li>
                                        {% endif %}
                                        {% endcache %}
                                     </ul>
                                  </li>
                             </ul>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         <!-- Ec Main Menu End -->
         <!-- ekka Mobile Menu Start -->
         <div id="ec-mobile-menu" class="ec-side-cart ec-mobile-menu">
             <div class="ec-menu-title">
                 <span class="menu_title">Меню</span>
                 <button class="ec-close">×</button>
             </div>
             <div class="ec-menu-inner">
                 <div class="ec-menu-content">
                     <ul>
                         <li><a href="{% url "main:index" %}">Главная</a></li>
                         <li><a href="{% url "main:about" %}">О магазине</a></li>
                         <li><a href="{% url "main:project" %}">О проекте</a></li>
                         <li class="dropdown"><a href="{% url "catalog:categories" %}">Каталог</a>
                            <ul class="sub-menu">
                                {% tag_all_categories as all_categories %}
                                {% if all_categories %}
                                {% cache 60 catalog_categories %}
                                   {% for cat in all_categories %}
                                       <li class="dropdown position-static"><a href="{% url "catalog:subcategories" cat.category.slug %}">
                                           {{cat.category.name}}</a>
                                       </li>
                                   {% endfor %}
                                {% endcache %}
                               {% else %}
                                   <li class="dropdown position-static">
                                       Категории не добавлены
                                   </li>
                               {% endif %}
                            </ul>
                         </li>
                     </ul>
                 </div>
                 {% comment %} <div class="header-res-lan-curr"> {% endcomment %}
                     {% comment %} <div class="header-top-lan-curr">
                         
   
                     </div> {% endcomment %}
                 {% comment %} </div> {% endcomment %}
             </div>
         </div>
         <!-- ekka mobile Menu End -->
     </header>
     <!-- Header End  -->
 
     <!-- Разметка модального окна корзины -->
     <div class="ec-side-cart-overlay"></div>
     <div id="ec-side-cart" class="ec-side-cart">
        {% include "carts/includes/modal_cart.html" %}
     </div>
     <!-- Закончилась разметка модального окна корзины -->

     {% include "includes/notifications.html" %}
     {% block content %}
     {% endblock %}

   <!-- Footer Start -->
     <footer class="ec-footer section-space-mt">
         <div class="footer-container">
             <div class="footer-top section-space-footer-p">
                 <div class="container">
                     <div class="row">
                         <div class="col-sm-12 col-lg-6 ec-footer-contact">
                             <div class="ec-footer-widget">
                                 <div class="ec-footer-logo"><a href="#"><img src="{% static "assets/images/logo/footer-logo.png" %}"
                                             {% comment %} alt=""><img class="dark-footer-logo" src="{% static "assets/images/logo/dark-logo.png" %}" {% endcomment %}
                                             alt="Site Logo" style="display: none;" /></a></div>
                                 <h4 class="ec-footer-heading">Контакты</h4>
                                 <div class="ec-footer-links">
                                     <ul class="align-items-center">
                                         <li class="ec-footer-link">Учебный проект Бритвиной Анастасии</li>
                                         {% comment %} <li class="ec-footer-link"><span>Call Us:</span>+44
                                                 0123 456 789</a></li>
                                         <li class="ec-footer-link"><span>Email:</span><a
                                                 href="mailto:example@ec-email.com">+example@ec-email.com</a></li> {% endcomment %}
                                     </ul>
                                 </div>
                             </div>
                         </div>
                         <div class="col-sm-12 col-lg-3 ec-footer-info">
                             <div class="ec-footer-widget">
                                 <h4 class="ec-footer-heading">Информация</h4>
                                 <div class="ec-footer-links">
                                     <ul class="align-items-center">
                                         <li class="ec-footer-link"><a href="{% url "main:about" %}">О магазине</a></li>
                                         <li class="ec-footer-link"><a href="{% url "main:project" %}">О проекте</a></li>
                                     </ul>
                                 </div>
                             </div>
                         </div>
                         <div class="col-sm-12 col-lg-3 ec-footer-account">
                             <div class="ec-footer-widget">
                                 <h4 class="ec-footer-heading">Пользователь</h4>
                                 <div class="ec-footer-links">
                                     <ul class="align-items-center">
                                         {% if not user.is_authenticated or user.is_superuser %}
                                            <li class="ec-footer-link"><a href="{% url "users:registration" %}">Регистрация</a></li>
                                            <li class="ec-footer-link"><a href="{% url "users:login" %}">Вход</a></li>
                                         {% else %}
                                            <li class="ec-footer-link"><a href="{% url "users:profile" %}">Профиль</a></li>
                                            <li class="ec-footer-link"><a href="{% url "orders:order_history" %}">История заказов</a></li>
                                            <li class="ec-footer-link"><a href="{% url "users:wishlist" %}">Избранное</a></li>
                                         {% endif %}
                                     </ul>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
             <div class="footer-bottom">
                 <div class="container">
                     <div class="row align-items-center">
                         <!-- Footer Copyright Start -->
                         <div class="col text-center footer-copy">
                             <div class="footer-bottom-copy ">
                                 <div class="ec-copy">Учебный проект</div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </footer>
     <!-- Footer Area End -->
 
     <!-- Modal -->
     {% block modal %}
     {% endblock modal %}
     <!-- Modal end -->
 
     <!-- Footer navigation panel for responsive display -->
     <div class="ec-nav-toolbar">
         <div class="container">
             <div class="ec-nav-panel">
                 <div class="ec-nav-panel-icons">
                     <a href="#ec-mobile-menu" class="navbar-toggler-btn ec-header-btn ec-side-toggle"><img
                             src="{% static "assets/images/icons/menu.svg" %}" class="svg_img header_svg" alt="icon" /></a>
                 </div>
                 <div class="ec-nav-panel-icons">
                     <a href="#ec-side-cart" class="toggle-cart ec-header-btn ec-side-toggle"><img
                             src="{% static "assets/images/icons/cart.svg" %}" class="svg_img header_svg" alt="icon" /><span
                             class="ec-cart-noti ec-header-count cart-count-lable">{% if carts %}{{ carts.total_quantity }}{% else %}0{% endif %}</span></a>
                 </div>
                 <div class="ec-nav-panel-icons">
                     <a href="{% url "main:index" %}" class="ec-header-btn"><img src="{% static "assets/images/icons/home.svg" %}"
                             class="svg_img header_svg" alt="icon" /></a>
                 </div>
                 <div class="ec-nav-panel-icons">
                     <a href="{% url "users:wishlist" %}" class="ec-header-btn"><img src="{% static "assets/images/icons/wishlist.svg" %}"
                             class="svg_img header_svg" alt="icon" /><span class="ec-cart-noti">4</span></a>
                 </div>
                 <div class="ec-nav-panel-icons">
                     <a href="login.html" class="ec-header-btn"><img src="{% static "assets/images/icons/user.svg" %}"
                             class="svg_img header_svg" alt="icon" /></a>
                 </div>
 
             </div>
         </div>
     </div>
     <!-- Footer navigation panel for responsive display end -->
 
     <!-- Cart Floating Button -->
     <div class="ec-cart-float">
         <a href="#ec-side-cart" class="ec-header-btn ec-side-toggle">
             <div class="header-icon"><img src="{% static "assets/images/icons/cart.svg" %}" class="svg_img header_svg" alt="cart" />
             </div>
             <span class="ec-cart-count cart-count-lable">{% if carts %}{{ carts.total_quantity }}{% else %}0{% endif %}</span>
         </a>
     </div>
     <!-- Cart Floating Button end -->
 
     <!-- Vendor JS -->
     <script src="{% static "assets/js/vendor/jquery-3.5.1.min.js" %}"></script>
     <script src="{% static "assets/js/vendor/popper.min.js" %}"></script>
     <script src="{% static "assets/js/vendor/bootstrap.min.js" %}"></script>
     <script src="{% static "assets/js/vendor/jquery-migrate-3.3.0.min.js" %}"></script>
     <script src="{% static "assets/js/vendor/modernizr-3.11.2.min.js" %}"></script>
 
     <!--Plugins JS-->
     <script src="{% static "assets/js/plugins/swiper-bundle.min.js" %}"></script>
     <script src="{% static "assets/js/plugins/countdownTimer.min.js" %}"></script>
     <script src="{% static "assets/js/plugins/scrollup.js" %}"></script>
     <script src="{% static "assets/js/plugins/jquery.zoom.min.js" %}"></script>
     <script src="{% static "assets/js/plugins/slick.min.js" %}"></script>
     <script src="{% static "assets/js/plugins/infiniteslidev2.js" %}"></script>
     <script src="{% static "assets/js/vendor/jquery.magnific-popup.min.js" %}"></script>
     <script src="{% static "assets/js/plugins/jquery.sticky-sidebar.js" %}"></script>
     <!-- Google translate Js -->
     <script src="{% static "assets/js/vendor/google-translate.js" %}"></script>
     <script>
         function googleTranslateElementInit() {
             new google.translate.TranslateElement({ pageLanguage: 'ru' }, 'google_translate_element');
         }
     </script>
     <!-- Main Js -->
     <script src="{% static "assets/js/vendor/index.js" %}"></script>
     <script src="{% static "assets/js/main.js" %}"></script>

     <!-- Custom Js -->
     <script src="{% static "assets/js/jquery-ajax.js" %}"></script>
 </body>
 </html>